<main>

    <!-- Tweet -->

  <h2>Tweet</h2>
  <table>
    <thead>
      <tr>
        <th>
         <%= attachment_image_tag @user, :user_image, :fill, 50, 50, format: 'jpeg', class: "img-circle pull-left profile-img",fallback: "no_image.jpg" %>
         By <%= @user.name %>
         </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= attachment_image_tag @post, :image, :fill, 350, 350, format: 'jpeg', class: "img-circle pull-left profile-img" %></td>
      </tr>
      <tr>
        <td><%= @post.tweet %></td>
      </tr>
      </tbody>
      </table>
    <ol>
      <li>
         <%= @post.created_at.strftime('%Y/%m/%d/%T') %>
      </li>

          <% if @post.favorited_by?(current_user) %>
          <li>
            <%=link_to post_favorites_path(@post), method: :delete do %>
            <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
            <%= @post.favorites.count %>いいね
          <% end %>
          </li>
          <% else %>
          <li>
              <%= link_to post_favorites_path(@post),method: :post do %>
              <i class="far fa-heart" aria-hidden="true"></i>
              <%= @post.favorites.count %>いいね
         <% end %>
          </li>
         <% end %>



      <li>
        <a href="#comments"><%= @post.post_comments.count %>件</a>
      </li>
       <% if @post.user == current_user %>
      <li><%= link_to "編集", edit_post_path(@post.id) %></li>
      <li><%= link_to "削除", post_path(@post.id), method: :delete %></li>
       <% end %>
     </ol>

     <!-- Post-Comments- -->

    <div class="post-nav">
    <h3 class="comment-count"><%= @post.post_comments.count %>件コメント</h3>
     <% @post.post_comments.each do |post_comment| %>
     <table>
       <thead>
         <tr>
           <th><%= post_comment.user.name %></th>
         </tr>
       </thead>
       <tbody>
         <tr>
           <td><%= post_comment.created_at.strftime('%Y/%m/%d/%T') %></td>
         </tr>
         <tr>
           <td> <%= post_comment.comment %></td>
         </tr>
         <tr>
            <td>
              <% if post_comment.user == current_user %>
              <%=link_to "削除", post_post_comment_path(post_comment.post, post_comment), method: :delete %>
              <% end %>
            </td>
          </tr>
       </tbody>
      </table>
      <% end %>
     </div>

     <!-- Create-Comment -->

     <h4>Comment</h4>
      <%= form_with(model:[@post, @post_comment], local: true) do |f| %>
      <%= f.text_area :comment, rows:'5', class: "form-control" %>
      <%= f.submit "送信", class: "btn btn-lg btn-base-1 mt-20 pull-right" %>
      <% end %>

 </main>